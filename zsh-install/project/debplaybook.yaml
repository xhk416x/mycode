---
- name: Wes-zsh-install
  hosts: localhost
  connection: local

  # vars_prompt:
  #   - name: theme
  #     prompt: "What theme do you want? (theme link here)"
  #     private: no
  #     default: "agnoster"
  #### maybe as an ENV variable??? all ENV variables are passed to ansible
  vars:
    theme: "agnoster"

  tasks:
    - name: Apt to install zsh
      ansible.builtin.apt: #module
        name: zsh
        state: present
    become: true #run as root. keyword for task not module

    - name: Apt to install fonts-powerline
      ansible.builtin.apt:
        name: fonts-powerline
        state: present
      become: true\

    - name: "Edit plugins"
      lineinfile:
        path: "/home/student/.zshrc"
        regexp: "^plugins=.*"
        line: "plugins=(git colored-man-pages zsh-syntax-highlighting zsh-autosuggestions)"
        backup: yes
      become: true

    - name: "Edit theme"
      lineinfile:
        path: "/home/student/.zshrc"
        regexp: "^ZSH_THEME=.*"
        line: 'ZSH_THEME="{{theme}}"'
        backup: yes
      become: true
